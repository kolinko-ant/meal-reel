<!doctype html>
<html lang="en">
<meta charset="utf-8">
<title>MealReel Share</title>
<script>
    const params = new URLSearchParams(location.search);
    const url = params.get('url');
    if (url) {
        const KEY = 'mealreel_items_v1';
        const items = JSON.parse(localStorage.getItem(KEY) || '[]');
        const vid = (new URL(url)).pathname.split('/')[2];
        const item = {
            id: crypto.randomUUID(),
            url,
            vid,
            title: "Shared reel",
            category: "lunch",
            favorite: false,
            addedAt: Date.now()
        };
        items.push(item);
        localStorage.setItem(KEY, JSON.stringify(items));
    }
    location.href = './'; // go back to main app
</script>
