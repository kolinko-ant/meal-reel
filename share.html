<!doctype html>
<html>
<body>Addingâ€¦
<script type="module">
    import {addReelFromUrl, isShorts} from './js/app.js';

    const sp = new URLSearchParams(location.search);
    let url = sp.get('url') || '';
    if (!url) {
        const t = sp.get('text') || '';
        const m = t.match(/https?:\/\/\S+/);
        if (m) url = m[0];
    }
    (async () => {
        if (url && isShorts(url)) {
            const item = await addReelFromUrl(url);
            sessionStorage.setItem('mealreel_last_added', item.vid);
        }
        location.href = './';
    })();
</script>
</body>
</html>